
kind: ReplicationController
apiVersion: v1beta3
metadata:
  name: frontend-ssh
  labels:
    name: frontend-ssh
spec:
  replicas: 1
  selector:
    name: frontend-ssh
  template:
    metadata:
      labels:
        name: frontend-ssh
    spec:
      containers:
        - name: frontend-ssh
          image: the0rem/laravel-kubernetes:latest
          # Make sure we always get the latest image
          imagePullPolicy: Always
          ports:
            - containerPort: 22
              protocol: TCP
          volumeMounts: 
            - name: ssl-key-volume
              mountPath: /etc/ssl-key-volume
              readOnly: true
            - name: ssh-key-volume
              mountPath: /root/.ssh
              readOnly: true
          # Environment variables will be injected based upon environment choice
          env: #env#

      volumes: 
        - name: ssl-key-volume
          source: 
            secret: 
              secretName: ssl-key-secret
        - name: ssh-key-volume
          source: 
            secret: 
              secretName: ssh-key-secret

