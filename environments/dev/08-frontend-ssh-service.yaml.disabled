
# Service for load balancing frontend component
kind: Service
apiVersion: v1beta3
metadata:
  name: frontend-ssh
  labels:
    name: frontend-ssh

spec:
  # Expose service to http (not important as wil be handled by reverse-proxy)
  ports:
    - port: 222
      targetPort: 22
      protocol: TCP
  PublicIPs: 
    - localhost

  # Match any frontend pod
  selector:
    name: frontend-ssh
  # Any SSL requests will be terminated in the pods. Because of this we need to 
  # enable routing users to the correct pod to correctly handle SSL sessions
  sessionAffinity: ClientIP
